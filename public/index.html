<!doctype html>
<html>
    <head>
      <title>Impress</title>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
			<!--><link rel='stylesheet' href='skeleton/stylesheets/layout.css' />
			<link rel='stylesheet' href='skeleton/stylesheets/skeleton.css' /> -->
			<link rel='stylesheet' href='impress.css' />
			<link rel='stylesheet' href='custom.css' />
			<script src='jquery-1.7.1.min.js'></script> 
			<script src='slide.js'></script>
		
		
	
		<script>
				var impressSlider;
				
				//generate anchor nodes to jump easily between slides
				var populateSlideViewer = function(id,step) {
					var a = $('<a href="#step-' + (id + 1) + '" id="anchor-step-' + (id+1) + '" class="viewer-anchor" />');
							li = $('<li class="step-view" style="width:300px;" />');
							
					a.html(li);
					li.html(step);
					
					return a;
				};
				
				var createStepClone = function(step) {
					var cloned    = $(step).clone(),
					 		width     = ($(step).css('width').match(/[0-9]+/)) / 4,
						  height    = ($(step).css('height').match(/[0-9]+/)) / 4,
						  fontSize  = ($(step).css('font-size').match(/[0-9]+/)) / 4;

					cloned.css({
						'width':             width+"px",
						'height':            height+"px",
						'font-size':         fontSize+"px",
						'background-color':  'white',
						'border-radius':     '10px'
					});
					cloned.attr('id', '').addClass('custom-step').removeClass('step');
					
					return cloned;
				};
				
				var getActiveThumb = function() {
					var oldLocation = location.href;
					setInterval(function() {
						if(location.href != oldLocation) {
					  	var idFromLocation = location.href.split('/').pop(),
									slideIndex     = idFromLocation.split('-').pop();
									
							if($('a > li > div').hasClass('custom-active')) {
								$('a > li > div').removeClass('custom-active');
								impressSlider.goToSlide(parseInt(slideIndex-1));
							}
							
							$('a#anchor-'+idFromLocation + ' > li > div').addClass('custom-active');
					    oldLocation = location.href
					    }
					 }, 100);
				};

				window.onload = function() {
					getActiveThumb();
					
					// find number of slides and dynamically add div thumbnails to the page
					var numSlidesInDeck =  $('div.step').length;
					for(var i = 0; i < numSlidesInDeck;i++ ) {
						var step = $("div#step-"+(i+1)).get(0);
						var clonedStep = createStepClone(step)
						$('#slide-list').append(populateSlideViewer(i, clonedStep));
					}
			
					impressSlider = $('div ul#slide-list').bxSlider({
						mode: 'vertical',
						displaySlideQty: 5,
						moveSlideQty: 1,
						speed: 100
					});
					
					//impressSlider.reloadShow();
				};	  
		</script>
		
	</head>
    <body>
	
		<div class='container columns' style='z-index:101 important!;'>
			<div id='left-nav-bar' class='five columns alpha' style="float:left;">
				<div id='slide-interface' style='z-index:101;'>
					<ul id='slide-list' style='z-index=101;'></ul>
				</div>
				<!-- <button id='add-slide'>Add a slide</button> -->
			</div>
		</div>
		
		<div id='container-custom'>
		
		<div id="impress" style='z-index:-1;'>
			<div id='step-1' class="step slide" data-x="0" data-y="0">
			    My first slide
			</div>
			
			<div id='step-2' class="step slide" data-x="1600" data-y="0">
			    This is slide 2
			</div>
			
			<div id='step-3' class="step" data-x="500" data-y="-1000">
			    This is slide 3
			</div>
			
			<div id='step-4' class="step" data-x="500" data-y="-800" data-rotate = "90">
			    This is slide 4
			</div>
			
			<div id='step-5' class="step" data-x="500" data-y="-800" data-rotate-z = "90">
			    This is slide 5 -- does it have the same setting?
			</div>
			
			<div id='step-6' class="step" data-x="0" data-y="-800" data-rotate-x="90" data-rotate-y="0" data-scale="0.1">
			    This is slide 6 and it rotates in.
			</div>
			
			 <div id='step-7' class="step" data-x="0" data-y="-800" data-rotate-y="90" data-rotate-z="0" data-scale="0.1">
			    This is slide 7 and it rotates in.
			</div>
			
			<div id='step-8' class="step slide" data-x="-1000" data-y="800" data-z='100'>
				My first slide 8 
			</div>
		</div>
		 
		</div>
		<script src='impress.js'></script>
		</body>
</html>



